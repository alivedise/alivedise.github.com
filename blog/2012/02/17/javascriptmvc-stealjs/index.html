
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>[javascriptMVC] stealJS - steal anything - Ascheriit</title>
  <meta name="author" content="Alive Kuo">
  <link rel="author" href="humans.txt">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  
    
  
  <meta name="description" content="steal is a function that loads scripts, css, and other resources into your application. steal(FILE_or_FUNCTION, ...) Quick Walkthrough Add a script &hellip;">
  
  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alivedise.github.com/blog/2012/02/17/javascriptmvc-stealjs/">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ascheriit" type="application/atom+xml">
  <meta name="og:type" content="website" />
  <meta name="og:site_name" content="Ascheriit" />
  <meta name="og:title" content="[javascriptMVC] stealJS - steal anything" />
  <meta name="og:description" content="steal is a function that loads scripts, css, and other resources into your application. steal(FILE_or_FUNCTION, ...) Quick Walkthrough Add a script &hellip;" />
  <meta name="og:url" content="http://alivedise.github.com/blog/2012/02/17/javascriptmvc-stealjs/"/>
  <meta name="url" content="http://alivedise.github.com/blog/2012/02/17/javascriptmvc-stealjs/">
  
  <meta name="subject" content="javascriptmvc"/>
  <meta name="category" content="javascriptmvc"/>
  
  <meta name="distribution" content="global">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-29151691-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><div class="navbar">
  <div class="navbar-inner">
    <a class="brand" href="/">Ascheriit</a>
    <ul class="nav">
      <li><a href="/">Home</a></li>
      <li><a href="/blog/archives">Archives</a></li>
    </ul>
    <ul class="nav" data-subscription="rss">
      <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
      
    </ul>
      
    <form class="navbar-form" action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="q" value="site:alivedise.github.com" />
        <input class="span2" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
      
    
  </div>
</div>
</nav>
  <div class="wrapper_single">
    <div class="container">
      <article class="span8 offset2" role="article">
        <div class="article-format">

  <header>
    
      <h1 class="entry-title">[javascriptMVC] stealJS - Steal Anything</h1>
    
    
      <p class="meta">
        
  


  
    <span class="byline author vcard">by <span class="fn">Alive Kuo</span></span>
  

 - 
        








  


<time datetime="2012-02-17T13:44:00+08:00" pubdate data-updated="true">Feb 17<span>th</span>, 2012</time> - 
        

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/javascriptmvc/'>javascriptmvc</a>
  
</span>


        
      </p>
    
  </header>


  <div class="entry-content"><p><strong>steal</strong> is a function that loads scripts, css, and  other resources into your application.</p>

<pre><code>steal(FILE_or_FUNCTION, ...)
</code></pre>

<h2>Quick Walkthrough</h2>

<p>Add a script tag that loads<code>steal/steal.js</code> and add the path to the first file to load in the query string like:</p>

<p> &lt;script type=&#8217;text/javascript&#8217;</p>

<pre><code> src='../steal/steal.js?myapp/myapp.js'&gt;
</code></pre>

<p> &lt;/script></p>

<p>Then, start loading things and using them like:</p>

<pre><code> steal('myapp/tabs.js',
       'myapp/slider.js', 
       'myapp/style.css',function(){

    // tabs and slider have loaded 
    $('#tabs').tabs();
    $('#slider').slider()
 })
</code></pre>

<p>Make sure your widgets load their dependencies too:</p>

<pre><code> // myapp/tabs.js
 steal('jquery', function(){
   $.fn.tabs = function(){
    ...
   }
 })
</code></pre>

<h2>Examples:</h2>

<pre><code> // Loads ROOT/jquery/controller/controller.js
 steal('jquery/controller')
 steal('jquery/controller/controller.js')

 // Loads coffee script type and a coffee file relative to
 // the current file
 steal('steal/coffee').then('./mycoffee.coffee')

 // Load 2 files and dependencies in parallel and
 // callback when both have completed
 steal('jquery/controller','jquery/model', function(){
   // $.Controller and $.Model are available
 })

 // Loads a coffee script with a non-standard extension (cf)
 // relative to the current page and instructs the build
 // system to not package it (but it will still be loaded).
 steal({
    src: "./foo.cf",
    packaged: false,
    type: "coffee"
  })
</code></pre>

<p>The following is a longer walkthrough of how to install
 and use steal:</p>

<h2>Adding steal to a page</h2>

<p>After installing StealJS (or JavaScriptMVC),
find the <code>steal</code> folder with
 <code>steal/steal.js</code>.</p>

<p>To use steal, add a script tag
to <code>steal/steal.js</code> to your
html pages.</p>

<p>This walkthrough assumes you have the steal script in <code>public/steal/steal.js</code> and a directory structure like:</p>

<p> @codestart text
 /public</p>

<pre><code> /steal
 /pages
     myapp.html
 /myapp
     myapp.js
     jquery.js
     jquery.ui.tabs.js
</code></pre>

<p> @codeend</p>

<p> To use steal in <code>public/pages/myapp.html</code>,
 add a script tag in <code>myapp.html</code>:</p>

<p> @codestart html
 &lt;script type=&#8217;text/javascript&#8217;</p>

<pre><code> src='../steal/steal.js'&gt;
</code></pre>

<p> &lt;/script>
 @codeend</p>

<p> <div class='whisper'>PRO TIP: Bottom load your scripts. It
 will increase your application&#8217;s percieved response time.</div></p>

<h2>Loading the First Script</h2>

<p> Once steal has been added to your page, it&#8217;s time
 to load scripts. We want to load <code>myapp.js</code>
 and have it load <code>jquery.js</code> and
 <code>jquery.ui.tabs.js</code>.</p>

<p> By default, steal likes your scripts
 to be within in the [steal.static.root steal.root] folder.  The [steal.root] the
 folder contains the <code>steal</code> folder.  In this example,
 it is the <code>public</code> folder.</p>

<p> To load <code>myapp/myapp.js</code>, we have two options:</p>

<h4>Add a script tag</h4>

<p> Add a script tag after the steal
 script that &#8216;steals&#8217; <code>myapp.js</code> like:</p>

<p> @codestart html
 &lt;script type=&#8217;text/javascript&#8217;>
   steal(&#8216;myapp/myapp.js&#8217;)
 &lt;/script>
 @codeend</p>

<h4>Add the script parameter</h4>

<p> The most common (and shortest) way to load <code>myapp.js</code>
 is to add the script path to the steal script&#8217;s src after in the
 query params.  So, instead of adding a script, we change
 the steal script from:</p>

<p> @codestart html
 &lt;script type=&#8217;text/javascript&#8217;</p>

<pre><code> src='../steal/steal.js'&gt;
</code></pre>

<p> &lt;/script>
 @codeend</p>

<p> To</p>

<p> @codestart html
 &lt;script type=&#8217;text/javascript&#8217;</p>

<pre><code> src='../steal/steal.js?&lt;b&gt;myapp/myapp.js&lt;/b&gt;'&gt;
</code></pre>

<p> &lt;/script>
 @codeend</p>

<p> <div class='whisper'>PRO TIP: You can also just add
 <code>?myapp</code> to the query string.</div></p>

<h2>Loading Scripts</h2>

<p> We want to load <code>jquery.js</code> and
 <code>jquery.ui.tabs.js</code> into the page and then
 add then create a tabs widget.  First we need to load
 <code>jquery.js</code>.</p>

<p> By default, steal loads script relative to [steal.root]. To
 load <code>myapp/jquery.js</code> we can the following to
 <code>myapp.js</code>:</p>

<pre><code> steal('myapp/jquery.js');
</code></pre>

<p> But, we can also load relative to <code>myapp.js</code> like:</p>

<pre><code> steal('./jquery.js');
</code></pre>

<p> Next, we need to load <code>jquery.ui.tabs.js</code>.  You
 might expect something like:</p>

<pre><code> steal('./jquery.js','./jquery.ui.tabs.js')
</code></pre>

<p> to work.  But there are two problems / complications:</p>

<ul>
<li> steal loads scripts in parallel and runs out of order</li>
<li> <code>jquery.ui.tabs.js</code> depends on jQuery being loaded</li>
</ul>


<p> This means that steal might load <code>jquery.ui.tabs.js</code>
 before <code>jquery.js</code>.  But this is easily fixed.</p>

<p> [steal.static.then] waits until all previous scripts have loaded and
 run before loading scripts after it.  We can load <code>jquery.ui.tabs.js</code>
 after <code>jquery.js</code> like:</p>

<pre><code> steal('./jquery.js').then('./jquery.ui.tabs.js')
</code></pre>

<p> Finally, we need to add tabs to the page after
 the tabs&#8217;s widget has loaded.  We can add a callback function to
 steal that will get called when all previous scripts have finished
 loading:</p>

<pre><code> steal('./jquery.js').then('./jquery.ui.tabs.js', function($){
   $('#tabs').tabs();
 })
</code></pre>

<h2>Other Info</h2>

<h3>Exclude Code Blocks From Production</h3>

<p> To exclude code blocks from being included in
 production builds, add the following around
 the code blocks.</p>

<pre><code> //!steal-remove-start
     code to be removed at build
 //!steal-remove-end
</code></pre>

<h3>Lookup Paths</h3>

<p> By default steal loads resources relative
 to [steal.static.root steal.root].  For example, the following
 loads foo.js in <code>steal.root</code>:</p>

<pre><code> steal('foo.js'); // loads //foo.js
</code></pre>

<p> This is the same as writing:</p>

<pre><code> steal('//foo.js');
</code></pre>

<p> Steal uses <code>'//'</code> to designate the [steal.static.root steal.root]
 folder.</p>

<p> To load relative to the current file, add <code>"./"</code> or
  <code>"../"</code>:</p>

<pre><code> steal("./bar.js","../folder/zed.js");
</code></pre>

<p> Often, scripts can be found in a folder within the same
 name. For example, [jQuery.Controller $.Controller] is
 in <code>//jquery/controller/controller.js</code>. For convience,
 if steal is provided a path without an extension like:</p>

<pre><code> steal('FOLDER/PLUGIN');
</code></pre>

<p> It is the same as writing:</p>

<pre><code> steal('FOLDER/PLUGIN/PLUGIN.js')
</code></pre>

<p> This means that <code>//jquery/controller/controller.js</code>
 can be loaded like:</p>

<pre><code>  steal('jquery/controller')
</code></pre>

<h3>Types</h3>

<p> steal can load resources other than JavaScript.</p>

<p> @constructor</p>

<p> Loads resources specified by each argument.  By default, resources
 are loaded in parallel and run in any order.</p>

<p> @param {String|Function|Object} resource&#8230;</p>

<p> Each argument specifies a resource.  Resources can
 be given as a:</p>

<h3>Object</h3>

<p> An object that specifies the loading and build
 behavior of a resource.</p>

<pre><code>  steal({
    src: "myfile.cf",
    type: "coffee",
    packaged: true,
    unique: true,
    ignore: false,
    waits: false
  })
</code></pre>

<p> The available options are:</p>

<ul>
<li><p><strong>src</strong> {<em>String</em>} - the path to the resource.</p></li>
<li><p><strong>waits</strong> {<em>Boolean default=false</em>} - true the resource should wait
for prior steals to load and run. False if the resource should load and run in
parallel.  This defaults to true for functions.</p></li>
<li><p><strong>unique</strong> {<em>Boolean default=true</em>} - true if this is a unique resource
that &#8216;owns&#8217; this url.  This is true for files, false for functions.</p></li>
<li><p><strong>ignore</strong> {<em>Boolean default=false</em>} - true if this resource should
not be built into a production file and not loaded in
production.  This is great for script that should only be available
in development mode.</p></li>
<li><p><strong>packaged</strong> {<em>Boolean default=true</em>} - true if the script should be built
into the production file. false if the script should not be built
into the production file, but still loaded.  This is useful for
loading &#8216;packages&#8217;.</p></li>
<li><p><strong>type</strong> {<em>String default=&#8221;js&#8221;</em>} - the type of the resource.  This
is typically inferred from the src.</p></li>
</ul>


<h3><strong>String</strong></h3>

<p> Specifies src of the resource.  For example:</p>

<pre><code>   steal('./file.js')
</code></pre>

<p> Is the same as calling:</p>

<pre><code>   steal({src: './file.js'})
</code></pre>

<h3><strong>Function</strong></h3>

<p> A callback function that runs when all previous steals
 have completed.</p>

<pre><code> steal('jquery', 'foo',function(){
   // jquery and foo have finished loading
   // and runing
 })
</code></pre>

<p> @return {steal} the steal object for chaining
/</p>
</div>


  <footer>
    <p class="meta">
      
  


  
    <span class="byline author vcard">by <span class="fn">Alive Kuo</span></span>
  


      








  


<time datetime="2012-02-17T13:44:00+08:00" pubdate data-updated="true">Feb 17<span>th</span>, 2012</time>
      

posted in
<span class="categories">
  
    <a class='category' href='/blog/categories/javascriptmvc/'>javascriptmvc</a>
  
</span>


    </p>
    
      <div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>

    
    
      <a class="pull-left" href="/blog/2012/02/17/rd2-table-game-survey/" title="Previous Post: [Table Game] 桌遊大賽賽前研究">&laquo; [Table Game] 桌遊大賽賽前研究</a>
    
    
      <a class="pull-right" href="/blog/2012/02/17/javascript-future-reserve-word/" title="Next Post: [javascript] final誤我一生 - js未來保留字">[javascript] final誤我一生 - js未來保留字 &raquo;</a>
    
  </footer>

</div>

        
          <div class="article-format">
            <h1>Comments</h1>
            <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
          </div>
        
      </article>
    </div>
  </div>
  <div id="footer-widgets">
  <div class="container">
    <div class="row">
  <div class="span3">
    <h2>recent posts</h2>
    <ul class="recent_posts">
      
        <li>
          <a href="/blog/2013/07/18/window-manager-decoupling/">[FxOS] Plan: Window Management Module Decoupling</a>
        </li>
      
        <li>
          <a href="/blog/2013/07/16/audio-competing-in-fxos/">[Fx OS] Background media play</a>
        </li>
      
        <li>
          <a href="/blog/2013/07/10/system-modulization-plan/">Proposal: System Modualization Plan</a>
        </li>
      
        <li>
          <a href="/blog/2013/07/05/transition-state-machine/">[Window Management] Transition state machine</a>
        </li>
      
        <li>
          <a href="/blog/2013/07/05/page-visibility-on-firefox-os/">HTML5 Page visibility on Fx OS</a>
        </li>
      
    </ul>
    <h2><a href="/blog/archives">archives</a></h2>
  </div>
  <div class="span3">
    

  </div>
  <div class="span4">
    
<h2>twitter</h2>
<a href="https://twitter.com/alivedise" class="twitter-follow-button" data-show-count="true" data-lang="en">Follow @alivedise</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<div class="tweet" data-twitter-user="alivedise">
</div>


  </div>
  <div class="span2">
    <h2>found on</h2>

<a href="https://github.com/alivedise/" rel="tooltip" title="Github"><img class="social_icon" title="Github" alt="github icon" src="/images/glyphicons_381_github.png"></a>







<a href="http://twitter.com/alivedise" rel="tooltip" title="Twitter"><img class="social_icon" title="Twitter" alt="Twitter icon" src="/images/glyphicons_391_twitter_t.png"></a>








  </div>
</div>

  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-left">
  <a href="/">Ascheriit</a>
  - Copyright &copy; 2013 - Alive Kuo
</p>
<p class="pull-right">
  <span>Powered by <a href="http://octopress.org/">Octopress</a>.</span>
  
    <span>Designed by <a href="http://www.AdrianArtiles.com">Adrian Artiles</a>.</span>
  
</p>

  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/javascripts/libs/jquery-1.7.2.min.js" type="text/javascript"><\/script>')</script>
<script src="/javascripts/libs/bootstrap.min.js" type="text/javascript"></script>
<script src="/javascripts/jquery.tweet.js" type="text/javascript"></script>
<script src="/javascripts/jquery.instagram.js" type="text/javascript"></script>
<script src="/javascripts/libs/jquery.masonry.min.js" type="text/javascript"></script>
<script src="/javascripts/custom.js" type="text/javascript"></script>


<script type="text/javascript">
      var disqus_shortname = 'ascheriit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://alivedise.github.com/blog/2012/02/17/javascriptmvc-stealjs/';
        var disqus_url = 'http://alivedise.github.com/blog/2012/02/17/javascriptmvc-stealjs/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
